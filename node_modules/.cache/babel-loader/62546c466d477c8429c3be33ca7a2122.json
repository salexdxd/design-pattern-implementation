{"ast":null,"code":"//subject interface (declares -> subscribe(), unsubscribe(), notify())\n//concrete subject (implements -> subscribe(), unsubscribe(), notify())\nclass Subject {\n  constructor() {\n    this.observers = void 0;\n    this.observers = new Set();\n  }\n\n  subscribe(observer) {\n    this.observers.add(observer);\n  }\n\n  unsubscribe(observer) {\n    this.observers.delete(observer);\n  }\n\n  notify() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    this.observers.forEach(observer => {\n      observer.notify(...args); // console.log(\"notified\");\n    });\n  }\n\n} //observer interface (declares -> notify())\n\n\nlet COUNTER = 1; //concrete observer (implements -> notify())\n\nclass Observer {\n  constructor(observable) {\n    this.id = void 0;\n    this.id = ++COUNTER;\n  }\n\n  notify() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    console.log(`observer with id ${this.id} received: ${JSON.stringify(args)}`);\n  }\n\n}\n\nconst mySubject = new Subject();\nconst myObserver1 = new Observer(mySubject);\nconst myObserver2 = new Observer(mySubject);\nmySubject.observers.add(myObserver1);\nmySubject.observers.add(myObserver2);\nmySubject.notify('first notification', [1, 2, 3]); // myObserver1.notify('asd');\n// mySubject.unsubscribe();\n// console.log(mySubject);\n// console.log(myObserver1);\n// console.log(myObserver2);\n\nexport {};","map":{"version":3,"names":["Subject","constructor","observers","Set","subscribe","observer","add","unsubscribe","delete","notify","args","forEach","COUNTER","Observer","observable","id","console","log","JSON","stringify","mySubject","myObserver1","myObserver2"],"sources":["C:/Users/amastilovic/Desktop/NOTES/week5/day2 - design patterns/react-design-patterns/factory/design-pattern-implementation/src/observer.ts"],"sourcesContent":["\r\n//subject interface (declares -> subscribe(), unsubscribe(), notify())\r\ninterface ImplObservable {\r\n    // subscribe method\r\n    subscribe(observer:ImplObservable):void;\r\n    // unsubscribe method\r\n    unsubscribe(observer:ImplObservable):void;\r\n    // notify method\r\n    notify(...args: unknown[]):void;\r\n}\r\n\r\n//concrete subject (implements -> subscribe(), unsubscribe(), notify())\r\nclass Subject implements ImplObservable{\r\n\r\n    observers:Set<ImplObserver>;\r\n    constructor(){\r\n        this.observers = new Set();\r\n    }\r\n\r\n\r\n    subscribe(observer: ImplObserver): void {\r\n        this.observers.add(observer);\r\n    }\r\n    unsubscribe(observer: ImplObserver): void {\r\n        this.observers.delete(observer);\r\n    }\r\n    notify(...args: unknown[]): void {\r\n        this.observers.forEach((observer)=>{\r\n            observer.notify(...args);\r\n            // console.log(\"notified\");\r\n        });\r\n    }\r\n    \r\n}\r\n\r\n//observer interface (declares -> notify())\r\ninterface ImplObserver{\r\n    // receive notification\r\n    notify(...args:unknown[]):void;\r\n}\r\n\r\nlet COUNTER =1;\r\n//concrete observer (implements -> notify())\r\nclass Observer implements ImplObserver {\r\n    id:number;\r\n\r\n    constructor(observable:ImplObservable){\r\n        this.id= ++COUNTER;\r\n    }\r\n\r\n    notify(...args: unknown[]): void {\r\n        console.log(`observer with id ${this.id} received: ${JSON.stringify(args)}`);\r\n    }\r\n}\r\n\r\nconst mySubject = new Subject();\r\nconst myObserver1 = new Observer(mySubject);\r\nconst myObserver2 = new Observer(mySubject);\r\n\r\nmySubject.observers.add(myObserver1);\r\nmySubject.observers.add(myObserver2);\r\n\r\nmySubject.notify('first notification', [1,2,3])\r\n// myObserver1.notify('asd');\r\n// mySubject.unsubscribe();\r\n\r\n\r\n\r\n// console.log(mySubject);\r\n// console.log(myObserver1);\r\n// console.log(myObserver2);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport {};"],"mappings":"AACA;AAUA;AACA,MAAMA,OAAN,CAAuC;EAGnCC,WAAW,GAAE;IAAA,KADbC,SACa;IACT,KAAKA,SAAL,GAAiB,IAAIC,GAAJ,EAAjB;EACH;;EAGDC,SAAS,CAACC,QAAD,EAA+B;IACpC,KAAKH,SAAL,CAAeI,GAAf,CAAmBD,QAAnB;EACH;;EACDE,WAAW,CAACF,QAAD,EAA+B;IACtC,KAAKH,SAAL,CAAeM,MAAf,CAAsBH,QAAtB;EACH;;EACDI,MAAM,GAA2B;IAAA,kCAAvBC,IAAuB;MAAvBA,IAAuB;IAAA;;IAC7B,KAAKR,SAAL,CAAeS,OAAf,CAAwBN,QAAD,IAAY;MAC/BA,QAAQ,CAACI,MAAT,CAAgB,GAAGC,IAAnB,EAD+B,CAE/B;IACH,CAHD;EAIH;;AAnBkC,C,CAuBvC;;;AAMA,IAAIE,OAAO,GAAE,CAAb,C,CACA;;AACA,MAAMC,QAAN,CAAuC;EAGnCZ,WAAW,CAACa,UAAD,EAA2B;IAAA,KAFtCC,EAEsC;IAClC,KAAKA,EAAL,GAAS,EAAEH,OAAX;EACH;;EAEDH,MAAM,GAA2B;IAAA,mCAAvBC,IAAuB;MAAvBA,IAAuB;IAAA;;IAC7BM,OAAO,CAACC,GAAR,CAAa,oBAAmB,KAAKF,EAAG,cAAaG,IAAI,CAACC,SAAL,CAAeT,IAAf,CAAqB,EAA1E;EACH;;AATkC;;AAYvC,MAAMU,SAAS,GAAG,IAAIpB,OAAJ,EAAlB;AACA,MAAMqB,WAAW,GAAG,IAAIR,QAAJ,CAAaO,SAAb,CAApB;AACA,MAAME,WAAW,GAAG,IAAIT,QAAJ,CAAaO,SAAb,CAApB;AAEAA,SAAS,CAAClB,SAAV,CAAoBI,GAApB,CAAwBe,WAAxB;AACAD,SAAS,CAAClB,SAAV,CAAoBI,GAApB,CAAwBgB,WAAxB;AAEAF,SAAS,CAACX,MAAV,CAAiB,oBAAjB,EAAuC,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAAvC,E,CACA;AACA;AAIA;AACA;AACA;;AAUA"},"metadata":{},"sourceType":"module"}